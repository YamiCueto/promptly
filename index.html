<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promptly - AI Chat Interface</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <!-- Material Design Components -->
    <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <meta name="description" content="Interfaz de chat AI que se conecta a Ollama local y APIs externas">
    
    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
                        <div class="header-content">
                <div class="logo">
                    <h1><span class="material-icons">auto_awesome</span> Promptly</h1>
                    <span class="subtitle">Chat AI Assistant</span>
                </div>
                
                <!-- Model Selector in Header -->
                <div class="model-selector">
                    <span class="material-icons model-icon">psychology</span>
                    <div class="mdc-select mdc-select--outlined model-select-wrapper">
                        <div class="mdc-select__anchor">
                            <span class="mdc-notched-outline">
                                <span class="mdc-notched-outline__leading"></span>
                                <span class="mdc-notched-outline__notch">
                                    <span class="mdc-floating-label">Modelo</span>
                                </span>
                                <span class="mdc-notched-outline__trailing"></span>
                            </span>
                            <span class="mdc-select__selected-text-container">
                                <span class="mdc-select__selected-text" id="headerModelSelect"></span>
                            </span>
                            <span class="mdc-select__dropdown-icon">
                                <i class="material-icons">arrow_drop_down</i>
                            </span>
                        </div>
                        <div class="mdc-select__menu mdc-menu mdc-menu-surface mdc-menu-surface--fullwidth">
                            <ul class="mdc-list" id="headerModelList">
                                <!-- Options will be populated dynamically -->
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="header-controls">
                    <button class="mdc-button mdc-button--outlined" id="settingsBtn">
                        <span class="mdc-button__ripple"></span>
                        <i class="material-icons mdc-button__icon" aria-hidden="true">settings</i>
                        <span class="mdc-button__label">Configuraci√≥n</span>
                    </button>
                    <button class="mdc-button mdc-button--outlined" id="clearChatBtn">
                        <span class="mdc-button__ripple"></span>
                        <i class="material-icons mdc-button__icon" aria-hidden="true">delete_outline</i>
                        <span class="mdc-button__label">Limpiar Chat</span>
                    </button>
                    <button class="mdc-button mdc-button--outlined" id="exportChatBtn">
                        <span class="mdc-button__ripple"></span>
                        <i class="material-icons mdc-button__icon" aria-hidden="true">file_download</i>
                        <span class="mdc-button__label">Exportar</span>
                    </button>
                </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Settings Panel -->
            <div class="settings-panel" id="settingsPanel">
                <div class="settings-content">
                    <h3>Configuraci√≥n de AI</h3>
                    
                    <div class="setting-group">
                        <label for="providerSelect">Proveedor:</label>
                        <select id="providerSelect" class="form-select">
                            <option value="ollama">Ollama (Local)</option>
                            <option value="openai">OpenAI</option>
                            <option value="anthropic">Anthropic (Claude)</option>
                            <option value="groq">Groq</option>
                        </select>
                    </div>

                    <div class="setting-group" id="ollamaSettings">
                        <label for="ollamaUrl">URL de Ollama:</label>
                        <input type="text" id="ollamaUrl" class="form-input" value="http://localhost:11434" placeholder="http://localhost:11434">
                        
                        <label for="ollamaModel">Modelo:</label>
                        <select id="ollamaModel" class="form-select">
                            <option value="llama3.2">llama3.2</option>
                            <option value="llama3.1">llama3.1</option>
                            <option value="mistral">mistral</option>
                            <option value="codellama">codellama</option>
                            <option value="phi3">phi3</option>
                        </select>
                        <button type="button" id="refreshModelsBtn" class="btn-secondary btn-sm">
                            <span class="material-icons">refresh</span>
                            Actualizar Modelos
                        </button>
                    </div>

                    <div class="setting-group hidden" id="apiSettings">
                        <label for="apiKey">API Key:</label>
                        <input type="password" id="apiKey" class="form-input" placeholder="Ingresa tu API key">
                        
                        <label for="apiModel">Modelo:</label>
                        <select id="apiModel" class="form-select">
                            <!-- Se poblar√° din√°micamente seg√∫n el proveedor -->
                        </select>
                    </div>

                    <div class="setting-group">
                        <label for="temperature">Temperatura:</label>
                        <input type="range" id="temperature" min="0" max="2" step="0.1" value="0.7" class="form-range">
                        <span id="temperatureValue">0.7</span>
                    </div>

                    <div class="setting-group">
                        <label for="maxTokens">M√°x. Tokens:</label>
                        <input type="number" id="maxTokens" class="form-input" value="2048" min="1" max="8192">
                    </div>

                    <div class="settings-actions">
                        <button type="button" id="saveSettingsBtn" class="btn-primary">Guardar</button>
                        <button type="button" id="closeSettingsBtn" class="btn-secondary">Cerrar</button>
                    </div>
                </div>
            </div>

            <!-- Chat Container -->
            <div class="chat-container">
                <div class="chat-messages" id="chatMessages">
                    <div class="welcome-message">
                        <div class="welcome-content">
                            <h2>¬°Bienvenido a Promptly! üöÄ</h2>
                            <p>Tu interfaz de chat AI que se conecta tanto a Ollama local como a APIs externas.</p>
                            <div class="features">
                                <div class="feature">
                                    <span class="feature-icon">üè†</span>
                                    <span>Ollama Local</span>
                                </div>
                                <div class="feature">
                                    <span class="feature-icon">‚òÅÔ∏è</span>
                                    <span>APIs Externas</span>
                                </div>
                                <div class="feature">
                                    <span class="feature-icon">üé®</span>
                                    <span>Interfaz Moderna</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Input Area -->
        <footer class="input-area">
            <div class="input-container">
                <div class="input-wrapper">
                    <div class="mdc-text-field mdc-text-field--textarea mdc-text-field--outlined message-input-wrapper">
                        <span class="mdc-notched-outline">
                            <span class="mdc-notched-outline__leading"></span>
                            <span class="mdc-notched-outline__notch">
                                <span class="mdc-floating-label">Escribe tu mensaje aqu√≠...</span>
                            </span>
                            <span class="mdc-notched-outline__trailing"></span>
                        </span>
                        <span class="mdc-text-field__resizer">
                            <textarea id="messageInput" class="mdc-text-field__input" rows="1" aria-label="Mensaje"></textarea>
                        </span>
                    </div>
                    <button id="sendBtn" class="mdc-fab mdc-fab--mini send-btn" disabled>
                        <div class="mdc-fab__ripple"></div>
                        <span class="material-icons mdc-fab__icon">send</span>
                    </button>
                </div>
                <div class="input-info">
                    <span class="connection-status" id="connectionStatus">
                        <span class="status-dot"></span>
                        Configurar conexi√≥n
                    </span>
                </div>
            </div>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay hidden" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <p>Enviando mensaje...</p>
    </div>

    <!-- Scripts -->
    <!-- Material Design Components JS -->
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
    
    <script src="js/config.js"></script>
    <script src="js/providers.js"></script>
    <script src="js/chat.js"></script>
    <script src="js/app.js"></script>
</body>
</html>